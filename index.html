<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="description" content="Jogo de RPG em Realidade Aumentada inspirado em Dungeons & Dragons">

  <!-- PWA -->
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">

  <title>D&D AR Adventure</title>
  <link rel="stylesheet" href="/src/styles/main.css">
</head>

<body>
  <div id="app">
    <!-- Loading Screen -->
    <div id="loading-screen" class="screen active">
      <div class="loading-content">
        <div class="loading-spinner"></div>
        <h1>D&D AR Adventure</h1>
        <p id="loading-status">Verificando compatibilidade...</p>
      </div>
    </div>

    <!-- Incompatible Screen -->
    <div id="incompatible-screen" class="screen">
      <div class="incompatible-content">
        <div class="warning-icon">‚ö†Ô∏è</div>
        <h1>Aparelho Incompat√≠vel</h1>
        <p>Seu dispositivo n√£o suporta os recursos necess√°rios para jogar.</p>
        <div id="failed-requirements" class="requirements-list"></div>
        <div class="compatible-devices">
          <h3>Dispositivos compat√≠veis:</h3>
          <ul>
            <li>Samsung Galaxy S8 ou superior</li>
            <li>Google Pixel 2 ou superior</li>
            <li>Xiaomi Mi 9 ou superior</li>
            <li>OnePlus 6 ou superior</li>
          </ul>
          <a href="https://developers.google.com/ar/devices" target="_blank" class="btn-link">
            Lista completa de dispositivos ARCore
          </a>
        </div>
      </div>
    </div>

    <!-- Login Screen -->
    <div id="login-screen" class="screen">
      <div class="login-container">
        <h1>D&D AR Adventure</h1>
        <div class="login-tabs">
          <button class="tab-btn active" data-tab="login">Entrar</button>
          <button class="tab-btn" data-tab="register">Cadastrar</button>
        </div>

        <form id="login-form" class="auth-form active">
          <div class="form-group">
            <label for="login-email">Email</label>
            <input type="email" id="login-email" required autocomplete="email">
          </div>
          <div class="form-group">
            <label for="login-password">Senha</label>
            <input type="password" id="login-password" required autocomplete="current-password">
          </div>
          <button type="submit" class="btn-primary">Entrar</button>
          <p id="login-error" class="error-message"></p>
        </form>

        <form id="register-form" class="auth-form">
          <div class="form-group">
            <label for="register-name">Nome do Aventureiro</label>
            <input type="text" id="register-name" required minlength="3" maxlength="20">
          </div>
          <div class="form-group">
            <label for="register-email">Email</label>
            <input type="email" id="register-email" required autocomplete="email">
          </div>
          <div class="form-group">
            <label for="register-password">Senha</label>
            <input type="password" id="register-password" required minlength="6" autocomplete="new-password">
          </div>
          <button type="submit" class="btn-primary">Criar Conta</button>
          <p id="register-error" class="error-message"></p>
        </form>
      </div>
    </div>

    <!-- Character Creation Screen -->
    <div id="character-screen" class="screen">
      <div class="character-container">
        <h1>Crie seu Personagem</h1>
        <form id="character-form">
          <div class="class-selection">
            <h2>Escolha sua Classe</h2>
            <div class="class-grid">
              <button type="button" class="class-btn" data-class="warrior">
                <span class="class-icon">‚öîÔ∏è</span>
                <span class="class-name">Guerreiro</span>
                <span class="class-desc">Alto HP, tanque</span>
              </button>
              <button type="button" class="class-btn" data-class="mage">
                <span class="class-icon">üîÆ</span>
                <span class="class-name">Mago</span>
                <span class="class-desc">Alto dano m√°gico</span>
              </button>
              <button type="button" class="class-btn" data-class="archer">
                <span class="class-icon">üèπ</span>
                <span class="class-name">Arqueiro</span>
                <span class="class-desc">Cr√≠ticos devastadores</span>
              </button>
              <button type="button" class="class-btn" data-class="cleric">
                <span class="class-icon">‚ú®</span>
                <span class="class-name">Cl√©rigo</span>
                <span class="class-desc">Suporte e cura</span>
              </button>
            </div>
          </div>
          <button type="submit" class="btn-primary" id="create-character-btn" disabled>
            Come√ßar Aventura
          </button>
        </form>
      </div>
    </div>

    <!-- Map Screen -->
    <div id="map-screen" class="screen">
      <div id="map-container"></div>
      <div id="map-hud">
        <div class="player-info">
          <div class="player-avatar" id="player-avatar">‚öîÔ∏è</div>
          <div class="player-stats">
            <span id="player-name">Aventureiro</span>
            <span id="player-level">N√≠vel 1</span>
          </div>
        </div>
        <div class="compass" id="compass">
          <span class="compass-arrow">‚Üë</span>
          <span class="compass-label">N</span>
        </div>
      </div>

      <!-- Map Action Buttons -->
      <div class="map-actions">
        <button class="map-btn" id="inventory-btn" title="Invent√°rio">üéí</button>
        <button class="map-btn" id="character-btn" title="Personagem">üìä</button>
      </div>

      <div id="monster-panel" class="panel hidden">
        <div class="panel-content">
          <h3 id="monster-name">Goblin</h3>
          <div class="monster-stats">
            <span id="monster-hp">HP: 7/7</span>
            <span id="monster-level">CR: 1/4</span>
          </div>
          <button id="enter-ar-btn" class="btn-primary">Entrar em Combate AR</button>
        </div>
      </div>
    </div>

    <!-- AR Screen -->
    <div id="ar-screen" class="screen">
      <div id="ar-hud">
        <div class="ar-player-stats">
          <div class="stat-bar hp-bar">
            <span class="stat-label">HP</span>
            <div class="bar-container">
              <div class="bar-fill" id="ar-hp-fill"></div>
            </div>
            <span class="stat-value" id="ar-hp-value">100/100</span>
          </div>
          <div class="stat-bar mana-bar">
            <span class="stat-label">Mana</span>
            <div class="bar-container">
              <div class="bar-fill" id="ar-mana-fill"></div>
            </div>
            <span class="stat-value" id="ar-mana-value">50/50</span>
          </div>
        </div>

        <div class="ar-monster-info" id="ar-monster-info">
          <h3 id="ar-monster-name">Goblin</h3>
          <div class="monster-hp-bar">
            <div class="bar-fill" id="ar-monster-hp-fill"></div>
          </div>
        </div>

        <div class="ar-actions">
          <button class="action-btn" id="attack-btn" data-action="attack">
            <span class="action-icon">‚öîÔ∏è</span>
            <span class="action-name">Atacar</span>
          </button>
          <button class="action-btn" id="spell-btn" data-action="spell">
            <span class="action-icon">üîÆ</span>
            <span class="action-name">Magia</span>
          </button>
          <button class="action-btn" id="item-btn" data-action="item">
            <span class="action-icon">üß™</span>
            <span class="action-name">Item</span>
          </button>
          <button class="action-btn" id="flee-btn" data-action="flee">
            <span class="action-icon">üèÉ</span>
            <span class="action-name">Fugir</span>
          </button>
        </div>
      </div>

      <div id="damage-popups"></div>
      <div id="ar-messages"></div>
    </div>

    <!-- Victory Screen -->
    <div id="victory-screen" class="screen overlay">
      <div class="victory-content">
        <h1>Vit√≥ria!</h1>
        <div id="loot-container">
          <h2>Recompensas</h2>
          <div id="xp-gained" class="reward">+0 XP</div>
          <div id="loot-items" class="loot-grid"></div>
        </div>
        <button id="continue-btn" class="btn-primary">Continuar</button>
      </div>
    </div>

    <!-- Inventory Screen -->
    <div id="inventory-screen" class="screen overlay">
      <div class="inventory-container">
        <div class="inventory-header">
          <h1>Invent√°rio</h1>
          <button id="close-inventory-btn" class="btn-close">√ó</button>
        </div>

        <div class="equipment-section">
          <h2>Equipado</h2>
          <div class="equipment-slots">
            <div class="equipment-slot" data-slot="weapon">
              <span class="slot-icon">‚öîÔ∏è</span>
              <span class="slot-name">Arma</span>
              <div class="equipped-item" id="equipped-weapon">Vazio</div>
            </div>
            <div class="equipment-slot" data-slot="armor">
              <span class="slot-icon">üõ°Ô∏è</span>
              <span class="slot-name">Armadura</span>
              <div class="equipped-item" id="equipped-armor">Vazio</div>
            </div>
            <div class="equipment-slot" data-slot="accessory">
              <span class="slot-icon">üíç</span>
              <span class="slot-name">Acess√≥rio</span>
              <div class="equipped-item" id="equipped-accessory">Vazio</div>
            </div>
          </div>
        </div>

        <div class="items-section">
          <h2>Itens</h2>
          <div id="inventory-grid" class="inventory-grid"></div>
        </div>

        <div id="item-details" class="item-details hidden">
          <h3 id="item-name">Item</h3>
          <p id="item-description"></p>
          <div id="item-stats"></div>
          <div class="item-actions">
            <button id="equip-item-btn" class="btn-primary">Equipar</button>
            <button id="use-item-btn" class="btn-secondary">Usar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Character Screen -->
    <div id="character-screen-panel" class="screen overlay">
      <div class="character-panel">
        <div class="character-header">
          <h1>Personagem</h1>
          <button id="close-character-btn" class="btn-close">√ó</button>
        </div>

        <div class="character-identity">
          <div class="character-class-icon" id="char-class-icon">‚öîÔ∏è</div>
          <div class="character-info">
            <span id="char-name">Aventureiro</span>
            <span id="char-class">Guerreiro</span>
            <span id="char-level">N√≠vel 1</span>
          </div>
        </div>

        <div class="xp-section">
          <div class="xp-bar">
            <div class="xp-fill" id="xp-fill"></div>
          </div>
          <span id="xp-text">0 / 150 XP</span>
        </div>

        <div class="attributes-section">
          <h2>Atributos <span id="attribute-points">(0 pontos)</span></h2>
          <div class="attributes-grid">
            <div class="attribute-item">
              <span class="attr-name">FOR</span>
              <span class="attr-value" id="attr-str">10</span>
              <button class="attr-up-btn" data-attr="str">+</button>
            </div>
            <div class="attribute-item">
              <span class="attr-name">DES</span>
              <span class="attr-value" id="attr-dex">10</span>
              <button class="attr-up-btn" data-attr="dex">+</button>
            </div>
            <div class="attribute-item">
              <span class="attr-name">CON</span>
              <span class="attr-value" id="attr-con">10</span>
              <button class="attr-up-btn" data-attr="con">+</button>
            </div>
            <div class="attribute-item">
              <span class="attr-name">INT</span>
              <span class="attr-value" id="attr-int">10</span>
              <button class="attr-up-btn" data-attr="int">+</button>
            </div>
            <div class="attribute-item">
              <span class="attr-name">SAB</span>
              <span class="attr-value" id="attr-wis">10</span>
              <button class="attr-up-btn" data-attr="wis">+</button>
            </div>
            <div class="attribute-item">
              <span class="attr-name">CAR</span>
              <span class="attr-value" id="attr-cha">10</span>
              <button class="attr-up-btn" data-attr="cha">+</button>
            </div>
          </div>
        </div>

        <div class="derived-stats">
          <div class="stat-row">
            <span>HP:</span>
            <span id="char-hp">100/100</span>
          </div>
          <div class="stat-row">
            <span>Mana:</span>
            <span id="char-mana">50/50</span>
          </div>
          <div class="stat-row">
            <span>AC:</span>
            <span id="char-ac">10</span>
          </div>
          <div class="stat-row">
            <span>Ataque:</span>
            <span id="char-attack">+2</span>
          </div>
        </div>

        <div class="ability-section">
          <h2>Habilidade Especial</h2>
          <div class="ability-display" id="class-ability">
            <span class="ability-name">Provoca√ß√£o</span>
            <span class="ability-desc">For√ßa o monstro a atacar voc√™</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Defeat Screen -->
    <div id="defeat-screen" class="screen overlay">
      <div class="defeat-content">
        <h1>Derrotado...</h1>
        <p>Voc√™ foi incapacitado em combate.</p>
        <p class="penalty">-10% XP do n√≠vel atual</p>
        <button id="respawn-btn" class="btn-primary">Reviver no Santu√°rio</button>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>

</html>